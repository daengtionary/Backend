# ✨댕과사전 backend

![KakaoTalk_20221003_192709995](https://user-images.githubusercontent.com/108968316/193556299-2f97f1b0-31cb-4c8e-9bd2-125f4d9802b5.jpg)


<h2>✏프로젝트 소개</h2>

반려견을 위한 견주들의 커뮤니티!

- 진료 잘하는 동물 병원은 어딘지?

- 시설이 깔끔한 애견 호텔은 어딘지?

- 필요 없는 애견 용품이 있다면 장터에 올려 필요한 사람에게 판매해요

- 커뮤니티를 통해 후기 글도 쓰고 내 강아지 자랑까지!

서비스 URL : https://daengtionary.site/

서비스 영상 URL : https://www.youtube.com/watch?v=VtDBOU1VodU&feature=emb_logo

댕과사전 팀 노션 : https://www.notion.so/b16810b040254299a360deec190d1f4f

<h2>⭐주요 기능</h2>
<details>
<summary>카카오톡 소셜 회원가입</summary>
<div markdown="1">       

![194747242-d90b686d-754b-4c43-b210-d7bddc0eabc4](https://user-images.githubusercontent.com/108968316/194888641-265754d3-1a65-4e96-821c-77e16fd08041.gif)

</div>
</details>

<details>
<summary>댕매칭(산책, 애견카페) 으로 우리 아이 친구 찾아주기!</summary>
<div markdown="1">       

![194747597-1f97eff7-5aa1-4c5e-80be-7e82a6d2d49f](https://user-images.githubusercontent.com/108968316/194888709-bb9ceead-41ee-4c6f-aee1-6197541b9f23.gif)

</div>
</details>

<details>
<summary>댕플레이스(병원, 호텔 정보) 에서 꿀팁 얻어가기!</summary>
<div markdown="1">       

![194747282-9bf25fb1-e7a0-48e3-9eaa-a3c160fc1615](https://user-images.githubusercontent.com/108968316/194888988-c8cc81a0-1a0d-476f-be41-2882af1f2978.gif)


</div>
</details>

<details>
<summary>장터에서 글 쓰고 댕톡(장터 유저 간 1대1 채팅)으로 중고물품 거래하기!</summary>
<div markdown="1">       

![194747523-51f4acff-2b25-46c2-bc03-942d26d24bab](https://user-images.githubusercontent.com/108968316/194889021-99f2da25-369b-48d8-8dce-844cf68f0956.gif)


</div>
</details>

<details>
<summary>커뮤니티에 자유롭게 글쓰기!</summary>
<div markdown="1">       

![194747639-c67597d5-d3e7-42c1-83e1-3bfeb62956de](https://user-images.githubusercontent.com/108968316/194889050-2c89a149-333a-49f7-ad5a-91f715d4cce6.gif)


</div>
</details>

<h2>📋프로젝트 기간</h2>

2022-08-26 ~ 2022-10-07

서비스 시작 일

2022-10-03

<h2>📊팀원 소개</h2>

|이름|github|position|
|------|---|---|
|박진우|https://github.com/Jinu0729|팀장*BE|
|안승현|https://github.com/zemiles|BE|
|한동훈|https://github.com/hdonghun|BE|
|김민석|https://github.com/cordplace|부팀장*FE|
|하병노|https://github.com/hahbr88|FE|
|박재정|https://github.com/PARK-JAE-JEONG|FE|
|오소영||UX/UI|

<h2>📄기술 스택</h2>

<img src="https://img.shields.io/badge/Spring Boot-6DB33F?style=for-the-badge&logo=Spring Boot&logoColor=white"><img src="https://img.shields.io/badge/Spring Security-6DB33F?style=for-the-badge&logo=Spring Security&logoColor=white"><img src="https://img.shields.io/badge/JAVA-007396?style=for-the-badge&logo=java&logoColor=white">
<img src="https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=Redis&logoColor=white"><img src="https://img.shields.io/badge/Gradle-02303A?style=for-the-badge&logo=Gradle&logoColor=white"><img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white"><img src="https://img.shields.io/badge/GitHub Actions-2088FF?style=for-the-badge&logo=GitHub Actions&logoColor=white"><img src="https://img.shields.io/badge/Amazon S3-569A31?style=for-the-badge&logo=Amazon S3&logoColor=white"><img src="https://img.shields.io/badge/Code Deploy-007396?style=for-the-badge&logo=Code Deploy&logoColor=white">


<h2>📄툴</h2>

<img src="https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=GitHub&logoColor=white"><img src="https://img.shields.io/badge/Postman-FF6C37?style=for-the-badge&logo=Postman&logoColor=white"><img src="https://img.shields.io/badge/IntelliJ IDEA-000000?style=for-the-badge&logo=IntelliJ IDEA&logoColor=white"><img src="https://img.shields.io/badge/GitKraken-179287?style=for-the-badge&logo=GitKraken&logoColor=white"><img src="https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=Notion&logoColor=white"><img src="https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=Slack&logoColor=white">


<h2>📄서버</h2>

<img src="https://img.shields.io/badge/Amazon EC2-FF9900?style=for-the-badge&logo=Amazon EC2&logoColor=white"><img src="https://img.shields.io/badge/nginx-009639?style=for-the-badge&logo=nginx&logoColor=white">

<h2>🏍API</h2>

<h3>서비스 아키텍처</h3>

<details>
<summary>아키텍처 보기</summary>
<div markdown="1">       

![그림1](https://user-images.githubusercontent.com/108968316/194886934-5630a2d2-54ad-441a-8249-0b83e00e7dd9.png)

</div>
</details>



<h3>ERD</h3>

<details>
<summary>ERD 보기</summary>
<div markdown="1">       

![erd](https://user-images.githubusercontent.com/108968316/193586316-cd539be4-810c-42af-aee3-d2dbe731ef37.jpg)

</div>
</details>

<h3>댕과사전 API</h3>

URL : https://www.notion.so/API-1a8bdd074c034c799550baed8f6caa7b

<h2>🚀트러블 슈팅</h2>

<details>
<summary>쿼리 조회시 속도 향상</summary>
<div markdown="1">       

```
문제 상황 :  조회 쿼리를 요청했을 때 속도 저하

전체 쿼리 조회와 상세 페이지 조회 쿼리 속도 개선을 했습니다.

우선 전체 쿼리 조회는 pageable을 이용해서 페이징처리를 했습니다.

그러나 offset을 사용해서 데이터가 많이 없는데도 불구하고 0.4초나 걸리는 현상이 발생하게 되었습니다.

offset을 이용하면 예를들어 10020번째 데이터를 조회하려고 한다면 10000개의 데이터를 다 

조회 한 이후에 20개의 데이터를 조회하는 결과가 이루어 진다 하여 

no offset 방식으로 개선 해서 속도 개선을 했습니다.

```

![전체_쿼리_개선_전](https://user-images.githubusercontent.com/108968316/193590414-d546d84a-4575-4fea-bbcc-40390d071dea.jpg)
![nooffest](https://user-images.githubusercontent.com/108968316/193590433-ebd2befd-68af-4668-9924-fb2c0da47baf.jpg)

</div>
</details>

<details>
<summary>build시 속도 저하</summary>
<div markdown="1">       

```
문제 상황 :
- 점점 프로젝트를 진행할수록 build 시에 시간이 늘어나는것으로 보여 
    
    이것을 해결하고자 했습니다.
해결 방안 : 
 
 gitaction에서 cache를 이용해서 처리하는 방법이 있다는 것을 알고 바로 적용을 해서
 
 아래와 같은 식으로 약 20초의 속도를 감소시키는데에 성공했습니다
 ```
 
 ![cahsh_00000](https://user-images.githubusercontent.com/108968316/193587710-98c87516-7896-46b8-90a0-3ff7b821e685.jpg)
![cahsh_00001](https://user-images.githubusercontent.com/108968316/193587724-8d11feec-853e-4a85-951a-9876218a6a02.jpg)

.

</div>
</details>

<details>
<summary>엔진엑스를 이용한 무중단 배포중 임베디드 레디스 이용</summary>
<div markdown="1">       


```
문제 상황 : 

- nginx를 이용해서 무중단 배포중에 임베디드 레디스를 사용해서 챗팅기능을 구현하는데

새로운 빌드 배포시에 새로운 서버가 배포가 안되는 문제 발생

해결 방안 :

- 임베디드 레디스가 작동중에는 새로운 서버를 띄울수 없는점을 발견했습니다.

그래서 새로운 서버가 배포 할 때 레디스도 같이 종료후 실행을 하는 것으로 처리했습니다.
```

![error2](https://user-images.githubusercontent.com/108968316/193588930-2af3c4ce-b680-4ed3-a1cf-36ee82c2e438.jpg)
![error](https://user-images.githubusercontent.com/108968316/193588936-c08cdcff-49a7-4954-959f-201c92356ccf.jpg)


</div>
</details>

